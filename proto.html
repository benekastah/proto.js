<!DOCTYPE html>  <html> <head>   <title>proto.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="examples.html">                 examples.coffee               </a>                                           <a class="source" href="proto.html">                 proto.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               proto.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><strong><code>proto.coffee</code></strong> provides a small and simple, yet complete and powerful, toolkit for prototypal
inheritance in javascript. It was intended to minimize the number of steps it takes to build a successful
and organized object structure for your application. It is every bit as powerful as the typical class-based
structure, and a bit simpler and easier to wrap the head around as well (at least in the context of javascript).
So enjoy a break from the confusion that is javascript inheritance and embrace the true nature of its design!</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>A little environment detection...</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">g = </span><span class="k">if</span> <span class="nx">global</span><span class="o">?</span> <span class="k">then</span> <span class="nx">global</span> <span class="k">else</span> <span class="nb">window</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Used internally to ensure objects created through <code>Proto.template</code> won't be initialized right away.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">noInit = noInit: </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Used to break a loop in <code>Proto.each</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">BREAK = break_loop: </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Used to stop initializing a new object.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">DONE = finished_initializing: </span><span class="kc">true</span>

<span class="nv">isFn = </span><span class="nf">(fn) -&gt;</span> <span class="k">typeof</span> <span class="nx">fn</span> <span class="o">is</span> <span class="s2">&quot;function&quot;</span>
<span class="nv">hasProp = </span><span class="nb">Object</span><span class="o">::</span><span class="nx">hasOwnProperty</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p><code>create</code> allows us to use the prototypal inheritance style, even when Object.create is not supported.
This function itself is private, but the <code>Proto</code> object proxies the work of object creation to it.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">create = </span><span class="nx">do</span> <span class="o">-&gt;</span>
  <span class="k">if</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span>
    <span class="nf">(p) -&gt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span> <span class="nx">p</span>
  <span class="k">else</span>
    <span class="nf">(p) -&gt;</span>
      <span class="nv">O = </span><span class="o">-&gt;</span>
      <span class="nv">O:: = </span><span class="nx">p</span>
      <span class="k">new</span> <span class="nx">O</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>You can provide an <code>initialize</code> function that will be run automatically when an object is <code>create()</code>ed.
This function will eventually be handled here. By default, all the <code>initialize</code> functions of all the <code>base</code>
objects will be called with whatever is <code>return</code>ed from your base function. If you want to stop initializing
the base objects at a certain point, then <code>return this.DONE</code>. <code>this.DONE</code> acts as a "magic cookie" so we know
for sure when it's time to quit.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">initializeAll = </span><span class="nf">(p, args...) -&gt;</span>
  <span class="nv">t = </span><span class="k">if</span> <span class="k">this</span> <span class="o">==</span> <span class="nx">g</span> <span class="k">then</span> <span class="nx">p</span> <span class="k">else</span> <span class="k">this</span>
  <span class="k">if</span> <span class="nx">p</span><span class="p">.</span><span class="nx">hasOwnProperty</span> <span class="s2">&quot;initialize&quot;</span>
    <span class="p">[</span><span class="nx">tmp</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">DONE</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">t</span><span class="p">.</span><span class="nx">DONE</span><span class="p">,</span> <span class="nx">DONE</span><span class="p">]</span>
    <span class="nv">args = </span><span class="nx">p</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="o">||</span> <span class="nx">args</span>
    <span class="k">if</span> <span class="nx">tmp</span><span class="o">?</span> <span class="k">then</span> <span class="nv">t.DONE = </span><span class="nx">tmp</span> <span class="k">else</span> <span class="k">delete</span> <span class="nx">t</span><span class="p">.</span><span class="nx">DONE</span>
    <span class="k">return</span> <span class="k">if</span> <span class="nx">args</span> <span class="o">==</span> <span class="nx">DONE</span>
  <span class="k">if</span> <span class="nx">p</span><span class="p">.</span><span class="nx">base</span>
    <span class="k">try</span>
      <span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span> <span class="nx">p</span><span class="p">.</span><span class="nx">base</span>
    <span class="k">catch</span> <span class="nx">e</span>
      <span class="nv">args = </span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">base</span><span class="p">,</span> <span class="nx">args</span><span class="p">]</span>
    <span class="nx">initializeAll</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">args</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p><code>bind</code> is private, but the <code>Proto</code> object proxies here. General purpose function binding can be achieved by
calling <code>Proto.bind.call(thisObj, fn)</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">bind = </span><span class="nx">do</span> <span class="o">-&gt;</span>
  <span class="k">if</span> <span class="nb">Function</span><span class="o">::</span><span class="nx">bind</span>
    <span class="nf">(fn, scope) -&gt;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span>
  <span class="k">else</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>CoffeeScript version of the shim function found <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind">here</a>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nf">(fn, scope, args...) -&gt;</span>
      <span class="k">if</span> <span class="o">not</span> <span class="nx">isFn</span> <span class="nx">fn</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span> <span class="s2">&quot;Cannot call a non-function in `bind`&quot;</span>
      <span class="nv">Noop = </span><span class="o">-&gt;</span>
      <span class="nv">bound = </span><span class="nf">(bArgs...) -&gt;</span>
        <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span> <span class="p">(</span><span class="k">if</span> <span class="k">this</span> <span class="k">instanceof</span> <span class="nx">Noop</span> <span class="k">then</span> <span class="k">this</span> 
        <span class="k">else</span> <span class="nx">scope</span> <span class="o">or</span> <span class="nb">window</span><span class="p">),</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span> <span class="nx">bArgs</span>
      <span class="nv">Noop:: = </span><span class="k">this</span><span class="o">::</span>
      <span class="nv">bound:: = </span><span class="k">new</span> <span class="nx">Noop</span>
      <span class="nx">bound</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h2>Proto</h2>

<p>Here is our main object, and the one that will be exported (either through <code>module.exports</code>
or the global object, depending upon the environment).</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Proto =</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h3>API</h3>             </td>             <td class="code">               <div class="highlight"><pre>  </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p><strong><code>dontProvide</code></strong>: Any property names listed here will not be available for child objects
to use. These properties will still be
accessible from every object they existed on before they were added to the <code>dontProvide</code> array.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">dontProvide: </span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p><strong><code>dontIterate</code></strong>: Any property names listed here will not be iterated through the <code>Proto.each</code> function.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">dontIterate: </span><span class="p">[</span><span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="s2">&quot;self&quot;</span><span class="p">,</span> <span class="s2">&quot;BREAK&quot;</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p><strong><code>bind</code></strong>: This is a convenience method for painlessly executing private functions within the context
of this object. For example, if <code>this</code> refers to a context that descends from <code>Proto</code>:</p>

<pre><code>var privateFn = this.bind(function () {
  return this.number * 5
});
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bind: </span><span class="nf">(fn) -&gt;</span> <span class="nx">bind</span> <span class="nx">fn</span><span class="p">,</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p><strong><code>initialize</code></strong>: Our base initialize function does nothing, but because it exists, all objects that inherit from <code>Proto</code>
have the built-in capability to initialize themselves. Simply add an initialize function to customize your object
at the time of creation. For more information on how initialization
works, see the notes above at <code>initializeAll</code></p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">initialize: </span><span class="o">-&gt;</span> <span class="c1"># this function intentionally left blank</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p><strong><code>create</code></strong>: Makes a new, empty object using <code>this</code> as the prototype. Also will initiate the initialization
process, and make sure that items in the @dontProvide array aren't directly accessible through the child
object that is created.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">create: </span><span class="nf">(init) -&gt;</span>
    <span class="nv">p = </span><span class="nx">create</span> <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>The <code>base</code> object is added to every new object created, and will point to the direct parent object.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">p.base = </span><span class="k">this</span>
    <span class="nv">p.self = </span><span class="nx">p</span>
    <span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">@dontProvide</span> <span class="o">or</span> <span class="p">[]</span>
      <span class="k">if</span> <span class="nx">hasProp</span><span class="p">.</span><span class="nx">call</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">item</span> <span class="k">then</span> <span class="k">continue</span>
      <span class="nx">p</span><span class="p">.</span><span class="nx">dontIterate</span><span class="p">.</span><span class="nx">push</span> <span class="nx">item</span>
      <span class="nx">p</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span>
    <span class="k">if</span> <span class="nx">init</span> <span class="o">isnt</span> <span class="nx">noInit</span> <span class="o">and</span> <span class="nx">isFn</span> <span class="nx">p</span><span class="p">.</span><span class="nx">initialize</span>
      <span class="nx">initializeAll</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">...</span>
    <span class="nx">p</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p><strong><code>Proto.template</code></strong>: This function will not be available to child objects, and so must be called from
<code>Proto</code>. It does much the same thing as create, with two differences:</p>

<ol>
<li>Objects created this way will not be initialized (until an object is created from them with <code>create</code>)</li>
<li>You can specify the prototype as the first argument (default is <code>Proto</code>)</li>
</ol>

<p>As the name indicates, it is useful for creating objects that will be used primarily to create other objects.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">template: </span><span class="nf">(base=Proto) -&gt;</span>
    <span class="k">if</span> <span class="o">not</span> <span class="nx">Proto</span><span class="p">.</span><span class="nx">uses</span><span class="p">.</span><span class="nx">call</span> <span class="nx">base</span><span class="p">,</span> <span class="nx">Proto</span>
      <span class="nv">base = </span><span class="nx">Proto</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">call</span> <span class="nx">base</span>
      <span class="nx">Proto</span><span class="p">.</span><span class="nx">include</span><span class="p">.</span><span class="nx">call</span> <span class="nx">base</span><span class="p">,</span> <span class="nx">Proto</span><span class="p">,</span> <span class="kc">false</span>
    <span class="nx">base</span><span class="p">.</span><span class="nx">create</span> <span class="nx">noInit</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p><strong><code>include</code></strong>: This function allows us to easily add items to our objects, either at the time of creation
or any time during the objects existence. The required argument is the first (<code>item</code>). It can be an object
or a function. If it is an object, all the direct properties of the it will be mixed in to <code>this</code>. If it is
a function, then the function will be called in the context of <code>this</code>, and therefore any properties added or
modified on <code>this</code> in the body of that function will be affected appropriately. Therefore:</p>

<pre><code>var Apple = Proto.template().include(function (config) {
  this.hasSeeds = config.hasSeeds;
  this.isAFruit = true;
}, {hasSeeds: true});
</code></pre>

<p>will add the properties "hasSeeds" and "isAFruit" to Apple, and both will equal <code>true</code>.</p>

<p><strong>Note</strong>: if the 
<code>item</code> in the first argument is a function, then anything you pass in after that will be given to your function
as arguments, allowing for more advanced configurations.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">include: </span><span class="nf">(item, configs...) -&gt;</span>
    <span class="k">if</span> <span class="nx">isFn</span> <span class="nx">item</span>
      <span class="nx">item</span><span class="p">.</span><span class="nx">apply</span> <span class="k">this</span><span class="p">,</span> <span class="nx">configs</span>
    <span class="k">else</span>
      <span class="nv">safe = </span><span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="nv">safe = </span><span class="k">if</span> <span class="o">not</span> <span class="nx">safe</span><span class="o">?</span> <span class="k">then</span> <span class="kc">true</span> <span class="k">else</span> <span class="nx">safe</span>
      <span class="nv">dontProvide = </span><span class="nx">item</span><span class="p">.</span><span class="nx">dontProvide</span> <span class="o">or</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="nx">own</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">item</span>
        <span class="nx">unless</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">dontProvide</span>
          <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span> <span class="k">if</span> <span class="o">!</span><span class="nx">safe</span> <span class="o">or</span> <span class="o">not</span> <span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span> <span class="nx">name</span>
    <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p><strong><code>each</code></strong>: Provides a generic iterator for objects. This function will not iterate over items
in the <code>dontIterate</code> array. Pass in a function as a single argument, or as the second argument to
a boolean. The boolean first argument (if it exists) describes whether or not to iterate over the properties of
this object's prototype's (<code>false</code> by default).</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">each: </span><span class="nf">() -&gt;</span>
    <span class="nv">callback = </span><span class="nx">arguments</span><span class="p">[</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span>
      <span class="nv">iterateAll = </span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="p">[</span><span class="nx">tmp</span><span class="p">,</span> <span class="nx">@BREAK</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">@BREAK</span><span class="p">,</span> <span class="nx">BREAK</span><span class="p">]</span>
    <span class="nv">ret = </span><span class="p">(</span><span class="k">for</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="k">this</span>
      <span class="k">if</span> <span class="o">not</span> <span class="nx">iterateAll</span> <span class="o">and</span> <span class="o">not</span> <span class="nx">hasProp</span><span class="p">.</span><span class="nx">call</span> <span class="k">this</span><span class="p">,</span> <span class="nx">prop</span> <span class="k">then</span> <span class="k">continue</span>
      <span class="nx">unless</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">@dontIterate</span> <span class="o">or</span> <span class="p">[]</span>
        <span class="nv">result = </span><span class="nx">callback</span><span class="p">.</span><span class="nx">call</span> <span class="k">this</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span>
        <span class="k">break</span> <span class="k">if</span> <span class="nx">result</span> <span class="o">==</span> <span class="nx">BREAK</span>
        <span class="nx">result</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">tmp</span> <span class="o">==</span> <span class="kc">undefined</span>
      <span class="k">delete</span> <span class="nx">@BREAK</span>
    <span class="k">else</span>
      <span class="vi">@BREAK = </span><span class="nx">tmp</span>
    <span class="nx">ret</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p><strong><code>methods</code></strong>: Returns an array of all methods available from this object. Will find all methods,
including the ones belonging to prototype objects, unless the first argument to this function is falsey,
in which case it will only get direct methods of the object.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">methods: </span><span class="nf">(getAll=true) -&gt;</span>
    <span class="k">for</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="k">this</span>
      <span class="k">if</span> <span class="o">not</span> <span class="nx">getAll</span> <span class="o">and</span> <span class="o">not</span> <span class="nx">hasProp</span><span class="p">.</span><span class="nx">call</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span> <span class="k">then</span> <span class="k">continue</span>
      <span class="k">if</span> <span class="o">not</span> <span class="nx">isFn</span> <span class="nx">value</span> <span class="k">then</span> <span class="k">continue</span>
      <span class="nx">name</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p><strong><code>uses</code></strong>: Allows us to determine, in much the same way as <code>instanceof</code>, if the current object descends from
the given object in the first argument. Uses clever methods to be able to detect (for the most part) the use 
of an object even if it was mixed in instead of referenced directly.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">uses: </span><span class="nf">(obj) -&gt;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">is</span> <span class="nx">obj</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">self</span> <span class="o">is</span> <span class="nx">obj</span>
    <span class="o">||</span> <span class="nx">@base</span> <span class="o">is</span> <span class="nx">obj</span> <span class="o">||</span> <span class="nx">@base</span><span class="o">?</span><span class="p">.</span><span class="nx">self</span> <span class="o">is</span> <span class="nx">obj</span><span class="p">)</span>
      <span class="nv">ret = </span><span class="kc">true</span>
    <span class="k">else</span> <span class="k">if</span> <span class="nx">@base</span> <span class="o">and</span> <span class="nx">isFn</span> <span class="nx">@base</span><span class="p">.</span><span class="nx">uses</span>
      <span class="nv">ret = </span><span class="nx">@base</span><span class="p">.</span><span class="nx">uses</span> <span class="nx">obj</span>
    <span class="k">else</span>
      <span class="nv">ret = </span><span class="kc">false</span>
    <span class="nx">ret</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>This is a property that Proto needs to have for it to be detected successfully as a mixed in object.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Proto.self = </span><span class="nx">Proto</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Export the thing.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="nx">process</span><span class="o">?</span><span class="p">.</span><span class="nx">title</span> <span class="o">==</span> <span class="s2">&quot;node&quot;</span> <span class="k">then</span> <span class="nv">module.exports = </span><span class="nx">Proto</span>
<span class="k">else</span> <span class="vi">@Proto = </span><span class="nx">Proto</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 